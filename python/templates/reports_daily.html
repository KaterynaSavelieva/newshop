{% extends "base.html" %}
{% block content %}

<h1>Umsatz pro Tag</h1>

<!-- Фільтр за датою (GET, щоб посилання можна було ділитися) -->
<form method="get" style="margin-bottom:12px">
  <label>Von:
    <input type="date" name="von" value="{{ von }}">
  </label>
  <label style="margin-left:8px">Bis:
    <input type="date" name="bis" value="{{ bis }}">
  </label>
  <button type="submit" style="margin-left:8px">Filtern</button>
  <a href="{{ url_for('report_daily') }}" style="margin-left:8px">Zurücksetzen</a>
</form>

<table border="1" cellpadding="6">
  <thead>
    <tr>
      <th>Tag</th>
      <th>Positionen</th>
      <th>Menge</th>
      <th>Rabatt (€)</th>
      <th>Umsatz (€)</th>
      <th>Kosten (€)</th>
      <th>Marge (€)</th>
      <th>Umsatz brutto (€)</th>
      <th>Marge brutto (€)</th>
      <th>Marge (%)</th>
      <th>Marge brutto (%)</th>
    </tr>
  </thead>
  <tbody>
    {% for r in rows %}
    <tr>
      <td>{{ r[0] }}</td>
      <td style="text-align:right">{{ r[1] }}</td>
      <td style="text-align:right">{{ r[2] }}</td>
      <td style="text-align:right">{{ '%.2f'|format(r[3]) }}</td>
      <td style="text-align:right">{{ '%.2f'|format(r[4]) }}</td>
      <td style="text-align:right">{{ '%.2f'|format(r[5]) }}</td>
      <td style="text-align:right">{{ '%.2f'|format(r[6]) }}</td>
      <td style="text-align:right">{{ '%.2f'|format(r[7]) }}</td>
      <td style="text-align:right">{{ '%.2f'|format(r[8]) }}</td>
      <td style="text-align:right">{{ '%.2f'|format(r[9]) }}</td>
      <td style="text-align:right">{{ '%.2f'|format(r[10]) }}</td>
    </tr>
    {% endfor %}
  </tbody>
  <tfoot>
    <tr>
      <th>Summe</th>
      <th style="text-align:right">{{ totals.positionen }}</th>
      <th style="text-align:right">{{ '%.0f'|format(totals.menge) }}</th>
      <th style="text-align:right">{{ '%.2f'|format(totals.rabatt_eur) }}</th>
      <th style="text-align:right">{{ '%.2f'|format(totals.umsatz) }}</th>
      <th style="text-align:right">{{ '%.2f'|format(totals.kosten) }}</th>
      <th style="text-align:right">{{ '%.2f'|format(totals.marge) }}</th>
      <th style="text-align:right">{{ '%.2f'|format(totals.umsatz_br) }}</th>
      <th style="text-align:right">{{ '%.2f'|format(totals.marge_br) }}</th>
      <th></th>
      <th></th>
    </tr>
  </tfoot>
</table>

{% endblock %}
