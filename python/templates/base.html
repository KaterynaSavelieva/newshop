{# templates/base.html – Hauptvorlage für alle Seiten im Projekt #}
<!doctype html> <!-- sagt dem Browser: moderne HTML5-Seite -->
<html lang="de"> <!-- die Sprache der Seite ist Deutsch -->
<head>
    <!-- Zeichensatz: damit Umlaute (ä, ö, ü, ß) richtig angezeigt werden -->
    <meta charset="utf-8">

    <!-- sorgt dafür, dass die Seite auf Handy, Tablet und PC gut aussieht -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Titel der Seite – steht oben im Browser-Tab -->
    <title>{{ title or "NewShop – Dashboard" }}</title>

    <!-- Bootstrap = fertiges Design-System mit Buttons, Tabellen, Layout usw. -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Chart.js = Bibliothek, um Diagramme anzuzeigen -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- kleines Symbol (Icon) für die Browser-Registerkarte, optional -->
    
    <!-- Іконка PNG (сучасні браузери) -->
    <link rel="icon" type="image/png"
      href="{{ url_for('static', filename='favicon.png') }}"
      sizes="32x32">

<!-- Фолбек для браузерів, що шукають тільки .ico -->
    <link rel="shortcut icon"
      href="{{ url_for('static', filename='favicon.ico') }}">

    <!-- Eigene Farben und Stil (CSS) für das ganze Projekt -->
    <style>
        /* Allgemeines Design der Seite */
        body {
            background: #f8f9fb;   /* hellgrauer Hintergrund für eine ruhige Optik */
            font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            /* obige Zeile bestimmt den Schriftstil – moderne, gut lesbare Schrift */
        }

        /* obere Menüleiste (Navigation) */
        .navbar {
            background: #ffffff; /* weißer Hintergrund */
            border-bottom: 1px solid #e9ecef; /* dünne graue Linie unten */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04); /* leichter Schatten unten */
        }

        /* legt die maximale Breite des Inhalts fest */
        .container { max-width: 1280px; }

        /* Boxen (Bootstrap-Komponente "Card") */
        .card {
            border-radius: 14px;   /* abgerundete Ecken für weiches Aussehen */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.03); /* feiner Schatten */
        }

        /* Tabellenkopf – Bereich mit Spaltenüberschriften */
        .table thead th {
            white-space: nowrap; /* Text bleibt in einer Zeile (kein Zeilenumbruch) */
            background-color: #f1f3f5; /* leicht grauer Hintergrund */
        }

        /* Tabellenzeilen beim Darüberfahren mit der Maus */
        .table-hover tbody tr:hover {
            background-color: #f8f9fa; /* leicht hellere Farbe */
        }

        /* Stil des blauen Haupt-Buttons (Bootstrap-Klasse "btn-primary") */
        .btn-primary {
            background-color: #0069d9; /* mittleres Blau */
            border-color: #0062cc;     /* leicht dunklere Umrandung */
        }

        /* Markierung für den aktiven Menüpunkt (zeigt, wo man gerade ist) */
        .nav-link.active {
            font-weight: 600; /* etwas fetterer Text */
            color: #0d6efd !important; /* kräftiges Blau */
            border-bottom: 2px solid #0d6efd; /* blaue Linie unter dem aktiven Punkt */
        }

        /* Fußzeile (unten auf der Seite) */
        footer {
            color: #6c757d;        /* grauer Text */
            background: #f8f9fa;   /* heller Hintergrund */
            border-top: 1px solid #e9ecef; /* feine Linie über der Fußzeile */
        }
    </style>
</head>

<body>
    <!-- OBERE NAVIGATION -->
    <!-- "sticky-top" bedeutet: die Leiste bleibt oben, wenn man scrollt -->
    <nav class="navbar navbar-expand-lg sticky-top">
      <div class="container">
        <!-- Name/Logo des Projekts – Klick = Startseite -->
        <a class="navbar-brand fw-semibold" href="{{ url_for('dashboard.home') }}">NewShop</a>

        <!-- Menü-Knopf für kleine Bildschirme (Handy) -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav">
          <span class="navbar-toggler-icon"></span>
        </button>

        <!-- der Bereich mit den Navigationslinks -->
        <div class="collapse navbar-collapse" id="nav">
          <ul class="navbar-nav me-auto">
            <!-- jeder Punkt in der Navigation ist ein <li> (Listeneintrag) -->

            <!-- Link zum Dashboard (Tabelle der Verkäufe) -->
            <li class="nav-item">
              <a class="nav-link {% if request.endpoint == 'dashboard.table' %}active{% endif %}"
                 href="{{ url_for('dashboard.table') }}">Dashboard</a>
            </li>

            <!-- Link zum Bericht "Umsatz pro Tag" -->
            <li class="nav-item">
              <a class="nav-link {% if request.endpoint == 'reports.report_daily' %}active{% endif %}"
                 href="{{ url_for('reports.report_daily') }}">Umsatz pro Tag</a>
            </li>

            <!-- Bericht: Umsatz pro Kunde -->
            <li class="nav-item">
              <a class="nav-link {% if request.endpoint == 'reports.report_customers' %}active{% endif %}"
                 href="{{ url_for('reports.report_customers') }}">Umsatz pro Kunde</a>
            </li>

            <!-- Bericht: Umsatz pro Artikel -->
            <li class="nav-item">
              <a class="nav-link {% if request.endpoint == 'reports.report_articles' %}active{% endif %}"
                 href="{{ url_for('reports.report_articles') }}">Umsatz pro Artikel</a>
            </li>

            <!-- Bericht: Lagerwarnung (zeigt Artikel mit niedrigem Bestand) -->
            <li class="nav-item">
              <a class="nav-link {% if 'stock_low' in request.endpoint %}active{% endif %}"
                 href="{{ url_for('reports.report_stock_low') }}">Lagerwarnung</a>
            </li>

            <!-- Bericht: Lagerumschlag (wie schnell Artikel verkauft werden) -->
            <li class="nav-item">
              <a class="nav-link {% if request.endpoint == 'reports.report_turnover' %}active{% endif %}"
                 href="{{ url_for('reports.report_turnover') }}">Umschlag 90 Tag</a>
            </li>

            <!-- Bericht: Pareto-Analyse (80/20-Regel) -->
            <li class="nav-item">
              <a class="nav-link {% if request.endpoint == 'reports.report_pareto' %}active{% endif %}"
                 href="{{ url_for('reports.report_pareto') }}">Pareto 80/20</a>
            </li>
          </ul>

          <!-- RECHTE SEITE DER NAVIGATION: Benutzerbereich -->
          {% if current_user.is_authenticated %}
            <!-- Wenn der Benutzer angemeldet ist: -->
            <span class="text-muted small me-3">
                {{ current_user.name or current_user.email }}
                <!-- zeigt entweder Name oder E-Mail -->
            </span>
            <!-- Logout-Button -->
            <a class="btn btn-outline-secondary btn-sm" href="{{ url_for('auth.logout') }}">Abmelden</a>
          {% else %}
            <!-- Wenn kein Benutzer angemeldet ist: -->
            <a class="btn btn-primary btn-sm" href="{{ url_for('auth.login') }}">Anmelden</a>
          {% endif %}
        </div>
      </div>
    </nav>

    <!--  HAUPTBEREICH DER SEITE -->
    <main class="container py-4">
        <!-- Flash-Nachrichten (z. B. "Gespeichert", "Fehler", "Erfolgreich abgemeldet") -->
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for cat, msg in messages %}
            <!-- Bootstrap-Alert = Nachrichtbox -->
            <div class="alert alert-{{ cat }} alert-dismissible fade show" role="alert">
                {{ msg }} <!-- Text der Nachricht -->
                <!-- kleine Schließen-Schaltfläche -->
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
          {% endfor %}
        {% endif %}
        {% endwith %}

        <!-- hier wird der Inhalt der Unterseite eingefügt -->
        <!-- z. B. reports_daily.html oder reports_customers.html -->
        {% block content %}{% endblock %}
    </main>

    <!--  FUSSZEILE (unten auf jeder Seite) -->
    <footer class="text-center text-muted py-3 small">
        © NewShop – Demo Dashboard
    </footer>

    <!-- Bootstrap JavaScript (für Menü, Buttons, Dropdowns, etc.) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
