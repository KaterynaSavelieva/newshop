{# templates/base.html #}
<!doctype html>
<html lang="de">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ title or "NewShop â€“ Dashboard" }}</title>

    <!-- Bootstrap 5 (CSS) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Chart.js fÃ¼r Diagramme -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- Favicon (optional, Ð¼Ð¾Ð¶Ð½Ð° Ð´Ð¾Ð´Ð°Ñ‚Ð¸ Ð»Ð¾Ð³Ð¾Ñ‚Ð¸Ð¿ Ð¼Ð°Ð³Ð°Ð·Ð¸Ð½Ñƒ) -->
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}">

    <style>
        /* ðŸ©µ Grunddesign */
        body {
            background: #f8f9fb;
            font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }

        /* ðŸ”¹ Navbar */
        .navbar {
            background: #ffffff;
            border-bottom: 1px solid #e9ecef;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
        }

        /* ðŸ”¹ Container-Breite */
        .container { max-width: 1280px; }

        /* ðŸ”¹ Karten (Boxen) */
        .card {
            border-radius: 14px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.03);
        }

        /* ðŸ”¹ Tabellen */
        .table thead th {
            white-space: nowrap;
            background-color: #f1f3f5;
        }

        .table-hover tbody tr:hover {
            background-color: #f8f9fa;
        }

        /* ðŸ”¹ Buttons */
        .btn-primary {
            background-color: #0069d9;
            border-color: #0062cc;
        }

        /* ðŸ”¹ Aktiver MenÃ¼punkt */
        .nav-link.active {
            font-weight: 600;
            color: #0d6efd !important;
            border-bottom: 2px solid #0d6efd;
        }

        /* ðŸ”¹ Footer */
        footer {
            color: #6c757d;
            background: #f8f9fa;
            border-top: 1px solid #e9ecef;
        }
    </style>
</head>


<body>
    <!-- Navigationsleiste oben (bleibt beim Scrollen sichtbar) -->
    <nav class="navbar navbar-expand-lg sticky-top">
      <div class="container">
        <!-- Klick auf die Marke â†’ Startseite (Home mit Kachel/Ãœbersicht) -->
        <a class="navbar-brand fw-semibold" href="{{ url_for('dashboard.home') }}">NewShop</a>

        <!-- Hamburger-Button fÃ¼r kleine Bildschirme -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav">
          <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Eingeklapptes MenÃ¼ (mobil) / normale Leiste (Desktop) -->
        <div class="collapse navbar-collapse" id="nav">
          <ul class="navbar-nav me-auto">
            <!-- Link â€žDashboardâ€œ â†’ Tabelle der letzten VerkÃ¤ufe -->
            <li class="nav-item">
              <a class="nav-link {% if request.endpoint == 'dashboard.table' %}active{% endif %}"
                 href="{{ url_for('dashboard.table') }}">Dashboard</a>
            </li>

            <!-- Berichte: Tages-/Zeit-Ansicht -->
            <li class="nav-item">
              <a class="nav-link {% if request.endpoint == 'reports.report_daily' %}active{% endif %}"
                 href="{{ url_for('reports.report_daily') }}">Umsatz pro Tag</a>
            </li>

            <!-- Bericht: Top-Kunden -->
            <li class="nav-item">
              <a class="nav-link {% if request.endpoint == 'reports.report_customers' %}active{% endif %}"
                 href="{{ url_for('reports.report_customers') }}">Umsatz pro Kunde</a>
            </li>

            <!-- Bericht: Artikel (Top / Zeitreihe) -->
            <li class="nav-item">
              <a class="nav-link {% if request.endpoint == 'reports.report_articles' %}active{% endif %}"
                 href="{{ url_for('reports.report_articles') }}">Umsatz pro Artikel</a>
            </li>

            <!-- Bericht: Lagerwarnung (niedriger Bestand) -->
            <li class="nav-item">
              <a class="nav-link {% if 'stock_low' in request.endpoint %}active{% endif %}"
                 href="{{ url_for('reports.report_stock_low') }}">Lagerwarnung</a>
            </li>

            <!-- Bericht: Lagerumschlag 90 Tage -->
            <li class="nav-item">
              <a class="nav-link {% if request.endpoint == 'reports.report_turnover' %}active{% endif %}"
                 href="{{ url_for('reports.report_turnover') }}">Umschlag 90 Tag</a>
            </li>

            <!-- Bericht: Pareto-Analyse -->
            <li class="nav-item">
              <a class="nav-link {% if request.endpoint == 'reports.report_pareto' %}active{% endif %}"
                href="{{ url_for('reports.report_pareto') }}">Pareto 80/20</a>
            </li>
          </ul>

          <!-- Rechts: Login/Logout-Bereich -->
          {% if current_user.is_authenticated %}
            <!-- Anzeigename oder E-Mail des eingeloggten Users -->
            <span class="text-muted small me-3">{{ current_user.name or current_user.email }}</span>
            <!-- Abmelden-Button -->
            <a class="btn btn-outline-secondary btn-sm" href="{{ url_for('auth.logout') }}">Abmelden</a>
          {% else %}
            <!-- Anmelden-Button (falls nicht eingeloggt) -->
            <a class="btn btn-primary btn-sm" href="{{ url_for('auth.login') }}">Anmelden</a>
          {% endif %}
        </div>
      </div>
    </nav>

    <!-- Hauptbereich der Seite: hier werden Unterseiten eingesetzt -->
    <main class="container py-4">
        <!-- Bootstrap-Alerts (Flash-Messages) anzeigen -->
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for cat, msg in messages %}
            <div class="alert alert-{{ cat }} alert-dismissible fade show" role="alert">
                {{ msg }}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
          {% endfor %}
        {% endif %}
        {% endwith %}

        <!-- Platzhalter fÃ¼r die jeweiligen Inhalte (Jinja-Block) -->
        {% block content %}{% endblock %}
    </main>

    <!-- Kleiner Footer -->
    <footer class="text-center text-muted py-3 small">Â© NewShop â€“ Demo Dashboard</footer>

    <!-- Bootstrap 5 JavaScript (fÃ¼r Navbar, Modals, Alerts, â€¦) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
