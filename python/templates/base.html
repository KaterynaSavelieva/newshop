{# templates/base.html #}
<!doctype html>
<html lang="de">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ title or "NewShop – Dashboard" }}</title>

    <!-- Bootstrap 5 einbinden (CSS) -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <!-- Chart.js für Diagramme -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <style>
        /* Kleine, saubere Grundgestaltung */
        body { background: #f8f9fb; }
        .navbar { background: #fff; border-bottom: 1px solid #e9ecef; }
        .container { max-width: 1280px; }
        .card { border-radius: 14px; }
        .table thead th { white-space: nowrap; }
    </style>
</head>
<body>
    <!-- Navigationsleiste oben (bleibt beim Scrollen sichtbar) -->
    <nav class="navbar navbar-expand-lg sticky-top">
      <div class="container">
        <!-- Klick auf die Marke → Startseite (Home mit Kachel/Übersicht) -->
        <a class="navbar-brand fw-semibold" href="{{ url_for('dashboard.home') }}">NewShop</a>

        <!-- Hamburger-Button für kleine Bildschirme -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav">
          <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Eingeklapptes Menü (mobil) / normale Leiste (Desktop) -->
        <div class="collapse navbar-collapse" id="nav">
          <ul class="navbar-nav me-auto">
            <!-- Link „Dashboard“ → Tabelle der letzten Verkäufe -->
            <li class="nav-item">
              <a class="nav-link {% if request.endpoint == 'dashboard.table' %}active{% endif %}"
                 href="{{ url_for('dashboard.table') }}">Dashboard</a>
            </li>

            <!-- Berichte: Tages-/Zeit-Ansicht -->
            <li class="nav-item">
              <a class="nav-link {% if request.endpoint == 'reports.report_daily' %}active{% endif %}"
                 href="{{ url_for('reports.report_daily') }}">Umsatz pro Tag</a>
            </li>

            <!-- Bericht: Top-Kunden -->
            <li class="nav-item">
              <a class="nav-link {% if request.endpoint == 'reports.report_customers' %}active{% endif %}"
                 href="{{ url_for('reports.report_customers') }}">Umsatz pro Kunde</a>
            </li>

            <!-- Bericht: Artikel (Top / Zeitreihe) -->
            <li class="nav-item">
              <a class="nav-link {% if request.endpoint == 'reports.report_articles' %}active{% endif %}"
                 href="{{ url_for('reports.report_articles') }}">Umsatz pro Artikel</a>
            </li>

            <!-- Bericht: Lagerwarnung (niedriger Bestand) -->
            <li class="nav-item">
              <a class="nav-link {% if 'stock_low' in request.endpoint %}active{% endif %}"
                 href="{{ url_for('reports.report_stock_low') }}">Lagerwarnung</a>
            </li>

            <!-- Bericht: Lagerumschlag 90 Tage -->
            <li class="nav-item">
              <a class="nav-link {% if request.endpoint == 'reports.report_turnover' %}active{% endif %}"
                 href="{{ url_for('reports.report_turnover') }}">Umschlag 90 Tag</a>
            </li>

            <!-- Bericht: Pareto-Analyse -->
            <li class="nav-item">
              <a class="nav-link {% if request.endpoint == 'reports.report_pareto' %}active{% endif %}"
                href="{{ url_for('reports.report_pareto') }}">Pareto 80/20</a>
            </li>
          </ul>

          <!-- Rechts: Login/Logout-Bereich -->
          {% if current_user.is_authenticated %}
            <!-- Anzeigename oder E-Mail des eingeloggten Users -->
            <span class="text-muted small me-3">{{ current_user.name or current_user.email }}</span>
            <!-- Abmelden-Button -->
            <a class="btn btn-outline-secondary btn-sm" href="{{ url_for('auth.logout') }}">Abmelden</a>
          {% else %}
            <!-- Anmelden-Button (falls nicht eingeloggt) -->
            <a class="btn btn-primary btn-sm" href="{{ url_for('auth.login') }}">Anmelden</a>
          {% endif %}
        </div>
      </div>
    </nav>

    <!-- Hauptbereich der Seite: hier werden Unterseiten eingesetzt -->
    <main class="container py-4">
        <!-- Bootstrap-Alerts (Flash-Messages) anzeigen -->
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for cat, msg in messages %}
            <div class="alert alert-{{ cat }} alert-dismissible fade show" role="alert">
                {{ msg }}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
          {% endfor %}
        {% endif %}
        {% endwith %}

        <!-- Platzhalter für die jeweiligen Inhalte (Jinja-Block) -->
        {% block content %}{% endblock %}
    </main>

    <!-- Kleiner Footer -->
    <footer class="text-center text-muted py-3 small">© NewShop – Demo Dashboard</footer>

    <!-- Bootstrap 5 JavaScript (für Navbar, Modals, Alerts, …) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
